# ===========================================
# REST Subscriber - Environment Configuration
#
# Options:
#   1. Local deployment: COPY this file into the .env and adjust it
#   2. Docker deployment: COPY this file into the .env and adjust it
#   3. Docker Compose deployment: -
# ===========================================

# -----------------------------------------------------------------------------
# General Configuration
# -----------------------------------------------------------------------------
# Node environment: 'dev' or 'prod'
NODE_ENV=dev

# Server host and port
HOST=0.0.0.0
PORT=3000

# Logging level
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Data Routing Configuration
# -----------------------------------------------------------------------------
# Where to send/process incoming data:
#   - 'console': Log data to console (default, for development)
#   - 'excel': Save data to Excel file
#   - 'kafka': Send data to Kafka topic
SEND_TO=console

# -----------------------------------------------------------------------------
# Kafka Configuration (Required if SEND_TO=kafka)
# -----------------------------------------------------------------------------
# Kafka Producer Client ID (used to identify the producer in the Kafka cluster)
CLIENT_ID=rest-subscriber

# Kafka broker addresses (comma-separated)
KAFKA_BROKERS=kafka:29092

# Kafka topics
KAFKA_TOPIC_SENSOR_DATA=sensor-data
KAFKA_TOPIC_SERVICE_METRICS=subscriber-metrics

# Kafka connection settings
KAFKA_CONNECTION_TIMEOUT=10000
KAFKA_REQUEST_TIMEOUT=30000
KAFKA_RETRY_RETRIES=5

# -----------------------------------------------------------------------------
# Schema Registry Configuration (Required if SEND_TO=kafka)
# -----------------------------------------------------------------------------
# Schema Registry URL
SCHEMA_REGISTRY_URL=http://schema-registry:8081

# Schema Registry authentication (optional)
# SCHEMA_REGISTRY_USERNAME=
# SCHEMA_REGISTRY_PASSWORD=

# Schema validation
SCHEMA_VALIDATION_ENABLED=true

# Schema subjects
SERVICE_INPUT_SUBJECT=mqtt-sensor-data
SERVICE_OUTPUT_SUBJECT=processed-sensor-data

# Schema IDs (optional, will be fetched if not provided)
SERVICE_INPUT_SCHEMA_ID=
SERVICE_OUTPUT_SCHEMA_ID=

# -----------------------------------------------------------------------------
# Empathic Building Configuration
# -----------------------------------------------------------------------------
# Empathic Building API base URL
EB_BASE_URL=https://eu-api.empathicbuilding.com

# Pusher configuration
EB_PUSHER_KEY=your-key-here
EB_PUSHER_CLUSTER=eu

# Authentication: Either provide bearer token OR username/password
# Bearer token authentication (preferred)
# EB_BEARER_TOKEN=your-bearer-token

# OR username/password authentication
EB_USERNAME=your-email@example.com
EB_PASSWORD=your-password

# Subscription configuration (at least one must be set)
# Organization IDs (comma-separated)
EB_ORGANIZATION_IDS=7,160,592,593,643

# Location IDs (comma-separated)
EB_LOCATION_IDS=10

# Subscribe to notifications
EB_SUBSCRIBE_NOTIFICATIONS=true

# Reconnection settings
EB_RECONNECT_DELAY_MS=5000
EB_MAX_RECONNECT_ATTEMPTS=10

# -----------------------------------------------------------------------------
# Script Configuration (for fetch-sensors.ts)
# -----------------------------------------------------------------------------
# EB_ORG_ID=your-organization-id
# EB_LOCATION_ID=your-location-id
